name: Check EC2 SSH Key

on:
  push:
    branches:
      - dev
  workflow_dispatch:   # Permite ejecutarlo manualmente desde GitHub

jobs:
  check-key:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“ Mostrar si el secret existe
        run: |
          if [ -z "${{ secrets.EC2_SSH_KEY }}" ]; then
            echo "âŒ EC2_SSH_KEY NO estÃ¡ configurado"
            exit 1
          else
            echo "âœ… EC2_SSH_KEY estÃ¡ configurado correctamente"
          fi

      - name: ğŸ”’ Ver solo los primeros caracteres del secret (para validaciÃ³n)
        run: |
          echo "${{ secrets.EC2_SSH_KEY }}" | cut -c1-20
          echo "âœ” (Solo se muestran los primeros 20 caracteres por seguridad)"
